# ============================================
# PRODUCTION ENVIRONMENT - SitePsico
# ============================================
# Arquivo: .env.production
# IMPORTANTE: Este arquivo está configurado para SUPABASE PostgreSQL
# Substitua pelos seus valores REAIS antes de fazer deploy!
# ============================================

# ============================================
# CORE APPLICATION
# ============================================

# Node Environment
NODE_ENV=production

# App identifier
VITE_APP_ID=psicologo_sp

# JWT Secret - GERE UM NOVO COM: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_production_jwt_secret_32chars_min_change_me

# ============================================
# DATABASE - SUPABASE PostgreSQL
# ============================================
# Formato: postgresql://postgres:senha@db.xxx.supabase.co:5432/postgres
# Obtenha em: Supabase Project > Settings > Database > Connection String
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@db.iilroqozupvfxpfzfvtd.supabase.co:5432/postgres

# ============================================
# DEPLOYMENT URLS
# ============================================

# Frontend URL (seu domínio ou Vercel URL)
# Exemplo: https://seu-site.vercel.app ou https://seu-dominio.com
VITE_API_URL=https://seu-site.vercel.app

# App Base URL
VITE_APP_URL=https://seu-site.vercel.app

# Allowed CORS Origins (frontend URL)
# Adicione seu domínio Vercel E seu domínio customizado
# Separados por vírgula, SEM espaços
ALLOWED_ORIGINS=https://seu-site.vercel.app,https://seu-dominio.com,https://www.seu-dominio.com

# ============================================
# SECURITY SECRETS - GERE NOVOS!
# ============================================
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# CSRF Token Secret
CSRF_SECRET=your_production_csrf_secret_32chars_min_change_me

# Session Secret
SESSION_SECRET=your_production_session_secret_32chars_min_change_me

# Session Max Age (em ms, default 7 dias = 604800000)
SESSION_MAX_AGE=604800000

# ============================================
# EMAIL SERVICE (RESEND) - SERVER ONLY
# ============================================
# Obtenha em: https://resend.com/api-keys
# Plano gratuito: 100 emails/dia
# NÃO use VITE_ prefix - isso é apenas para o servidor!

RESEND_API_KEY=re_your_resend_api_key_here_change_me

# Email remetente (deve ser seu domínio verificado em Resend)
RESEND_FROM_EMAIL=contato@seu-dominio.com

# Email do psicólogo (para notificações)
OWNER_NOTIFICATION_EMAIL=seu-email@seu-dominio.com

# ============================================
# OAUTH & AUTHENTICATION
# ============================================

# OAuth Server URL (se aplicável)
OAUTH_SERVER_URL=

# Owner OpenID (se usar OAuth)
OWNER_OPEN_ID=

# ============================================
# GOOGLE SERVICES (Opcional)
# ============================================

# Google Maps API Key - para exibir mapa do consultório
# Obtenha em: https://console.cloud.google.com/
VITE_GOOGLE_MAPS_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Google Calendar Credentials (se integrar calendário)
GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxx
GOOGLE_REDIRECT_URI=https://seu-app.onrender.com/api/auth/google/callback

# Google Analytics 4
VITE_GA4_MEASUREMENT_ID=G-XXXXXXXXXX

# ============================================
# FORGE API (Notificações Push - Opcional)
# ============================================

BUILT_IN_FORGE_API_URL=
BUILT_IN_FORGE_API_KEY=

# ============================================
# BUSINESS RULES
# ============================================

# Limite de agendamentos por dia (deixe vazio para ilimitado)
APPOINTMENTS_PER_DAY_LIMIT=

# ============================================
# RATE LIMITING
# ============================================

# 3 requests per 15 minutes per IP
RATE_LIMIT_REQUESTS=3
RATE_LIMIT_WINDOW_MS=900000

# ============================================
# HTTPS/SSL (Production)
# ============================================

# HTTPS is handled by Render automatically
HTTPS_ENABLED=true

# HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# ============================================
# LOGGING
# ============================================

LOG_LEVEL=info

# ============================================
# MIGRATION & AUTO-SETUP (optional)
# ============================================

# Auto-run migrations at startup (set to false if migrations are run separately)
AUTO_MIGRATE=false

# ============================================
# INSTRUÇÕES DE SETUP
# ============================================
#
# 1. Substitua ALL "change_me" e "your_" values pelos valores REAIS
#
# 2. Para gerar secrets aleatórios, execute no terminal:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 3. DATABASE_URL:
#    - No Supabase, vá em Settings > Database > Connection String
#    - Copie a URL completa
#
# 4. RESEND_API_KEY:
#    - Vá em https://resend.com/api-keys
#    - Crie uma nova chave
#    - Copie para aqui
#
# 5. ALLOWED_ORIGINS:
#    - Seu frontend Vercel URL
#    - Seu domínio customizado
#    - Com https://
#    - Separados por VÍRGULA
#
# 6. Teste localmente:
#    npm run build
#    NODE_ENV=production node dist/index.js
#
# 7. Deploy no Railway:
#    git add .
#    git commit -m "Phase 0: Configure production environment"
#    git push origin main
#    Railway detectará mudanças e fará redeploy automático
#
# ============================================
